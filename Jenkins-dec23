pipeline{
agent any
stages{
  stage(gitcheckout){
    steps{
      git branch: 'main', credentialsId: 'github', url: 'https://github.com/vinayakanu/my-maven-prject.git'
    }
  }
  stage(build){
    steps{
      sh "mvn clean package"
      sh "mv target/*.war target/myweb.war"
    }
  }
  stage(deploy){
    steps{
      sh """
        pwd
        whoami
        scp target/myweb.war /home/ec2-user/tomcat/webapps/
        cd /home/ec2-user/tomcat/bin/
        ./shutdown.sh
        ./startup.sh
      """
      }
    }
  }
}
